class ScrollBrightness{constructor(a){const b=["ease","ease-in","ease-out","ease-in-out"];this.configurations=Array.isArray(a)?a:[a],this.isScrollTicking=!1,this.isResizeTicking=!1,this.isDOMContentLoaded=!1,this.isMobile=/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.groups=new Map,this.configurations.forEach((a,c)=>{a.easing&&!b.includes(a.easing)&&(console.warn(`Invalid easing value '${a.easing}' in configuration ${c+1}. Using 'ease' instead.`),a.easing="ease");const d={offset:a.offset===void 0?0:a.offset,scrollTriggerClass:a.scrollTriggerClass,parentClass:a.parentClass||null,zielKlasse:a.zielKlasse,initialBrightness:a.initialBrightness===void 0?.15:a.initialBrightness,targetBrightness:a.targetBrightness===void 0?1:a.targetBrightness,transitionTime:a.transitionTime===void 0?"0.3s":a.transitionTime,easing:a.easing===void 0?"ease":a.easing,keyframeLength:a.keyframeLength===void 0?100:a.keyframeLength,backgroundClass:a.backgroundClass||null,background:a.background||null,fallbackMobileBackground:a.fallbackMobileBackground||null,linkAttribute:a.linkAttribute||null,fixedBackground:a.fixedBackground!==void 0&&a.fixedBackground};return d.scrollTriggerClass&&d.zielKlasse?void(this.configurations[c]=d):void console.error(`Configuration ${c+1}: 'scrollTriggerClass' and 'zielKlasse' are required.`)}),this.handleScroll=this.handleScroll.bind(this),this.handleResize=this.handleResize.bind(this),this.domContentLoadedHandler=this.domContentLoadedHandler.bind(this),"complete"===document.readyState||"interactive"===document.readyState?this.domContentLoadedHandler():document.addEventListener("DOMContentLoaded",this.domContentLoadedHandler)}domContentLoadedHandler(){this.isDOMContentLoaded||(this.isDOMContentLoaded=!0,this.initElements(),window.addEventListener("scroll",this.onScroll.bind(this),{passive:!0}),window.addEventListener("resize",this.onResize.bind(this)),document.removeEventListener("DOMContentLoaded",this.domContentLoadedHandler))}onScroll(){this.isScrollTicking||(requestAnimationFrame(()=>{this.handleScroll(),this.isScrollTicking=!1}),this.isScrollTicking=!0)}onResize(){this.isResizeTicking||requestAnimationFrame(()=>{this.handleResize(),this.isResizeTicking=!1})}initElements(){this.configurations.forEach((a,b)=>{const c=document.querySelectorAll(a.scrollTriggerClass);if(0===c.length)return void console.warn(`Configuration ${b+1}: No elements found with class '${a.scrollTriggerClass}'.`);const d=document.querySelectorAll(a.parentClass||a.zielKlasse);return 0===d.length?void console.warn(`Configuration ${b+1}: No elements found with class '${a.parentClass||a.zielKlasse}'.`):void c.forEach((c,e)=>{let f=null;if(a.linkAttribute){const g=c.getAttribute(a.linkAttribute);if(!g)return void console.warn(`Configuration ${b+1}, Trigger ${e+1}: Attribute '${a.linkAttribute}' not defined.`);if(f=Array.from(d).find(b=>b.getAttribute(a.linkAttribute)===g),!f)return void console.warn(`Configuration ${b+1}, Trigger ${e+1}: No parent element with '${a.linkAttribute}="${g}"' found.`)}else if(f=d[e],!f)return void console.warn(`Configuration ${b+1}, Trigger ${e+1}: No corresponding parent element found.`);const g=f.querySelectorAll(a.zielKlasse);if(0===g.length)return void console.warn(`Configuration ${b+1}, Parent ${e+1}: No target elements with class '${a.zielKlasse}' found.`);const h={trigger:c,parent:f,config:a,totalWordsInGroup:0,targets:[],lastClampedProgress:-1};g.forEach(b=>{this.prepareTarget(b,a);const c=!!a.backgroundClass&&b.classList.contains(a.backgroundClass),d=c?this.isMobile&&a.fallbackMobileBackground?a.fallbackMobileBackground:a.background:null,e=this.wrapWords(b,a,c,d);h.totalWordsInGroup+=e.length,h.targets.push({element:b,words:e,hasBackgroundClass:c,backgroundValue:d,wordStartIndex:h.totalWordsInGroup-e.length,lastWordsToLight:-1})}),this.groups.set(c,h)})}),this.handleScroll()}prepareTarget(a,b){a.style.transition=`opacity ${b.transitionTime} ${b.easing}`,a.style.opacity="1"}wrapWords(a,b,c,d){const e=a.textContent;a.textContent="";const f=[],g=e.split(" ");return g.forEach((e,h)=>{const i=document.createElement("span");i.textContent=e,i.style.display="inline-block",i.style.opacity=b.initialBrightness,i.style.transition=`opacity ${b.transitionTime} ${b.easing}`,c&&d&&(i.style.backgroundImage=d,i.style.webkitBackgroundClip="text",i.style.backgroundClip="text",i.style.color="transparent",b.fixedBackground&&(i.style.backgroundPosition="center center",i.style.backgroundAttachment="fixed",i.style.backgroundSize="cover")),a.appendChild(i),f.push(i),h<g.length-1&&a.appendChild(document.createTextNode(" "))}),f}handleScroll(){const a=window.innerHeight||document.documentElement.clientHeight;this.groups.forEach(b=>{const{trigger:c,parent:d,config:e,totalWordsInGroup:f}=b,g=c.getBoundingClientRect(),h=g.height,i=e.offset/100*h,j=100*((a-g.top-i)/h),k=Math.max(0,Math.min(100,j));if(k===b.lastClampedProgress)return;b.lastClampedProgress=k;const l=Math.floor(k/100*f);b.targets.forEach(a=>{const{words:b,wordStartIndex:c}=a,d=b.length,f=Math.max(0,Math.min(d,l-c));f!==a.lastWordsToLight&&(a.lastWordsToLight=f,b.forEach((a,b)=>{a.style.opacity=b<f?e.targetBrightness:e.initialBrightness}))})})}handleResize(){this.groups.forEach(a=>{a.lastClampedProgress=-1}),this.handleScroll()}}window.ScrollBrightness=ScrollBrightness;