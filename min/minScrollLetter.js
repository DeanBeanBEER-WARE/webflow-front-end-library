class ScrollBrightness{constructor(t){const e=["ease","ease-in","ease-out","ease-in-out"];this.configurations=Array.isArray(t)?t:[t],this.isScrollTicking=!1,this.isResizeTicking=!1,this.isDOMContentLoaded=!1,this.isMobile=/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.groups=new Map,this.configurations.forEach((t,s)=>{t.easing&&!e.includes(t.easing)&&(console.warn(`Invalid easing value '${t.easing}' in configuration ${s+1}. Using 'ease' instead.`),t.easing="ease");const i={offset:void 0!==t.offset?t.offset:0,scrollTriggerClass:t.scrollTriggerClass,parentClass:t.parentClass||null,zielKlasse:t.zielKlasse,initialBrightness:void 0!==t.initialBrightness?t.initialBrightness:.15,targetBrightness:void 0!==t.targetBrightness?t.targetBrightness:1,transitionTime:void 0!==t.transitionTime?t.transitionTime:"0.3s",easing:void 0!==t.easing?t.easing:"ease",keyframeLength:void 0!==t.keyframeLength?t.keyframeLength:100,backgroundClass:t.backgroundClass||null,background:t.background||null,fallbackMobileBackground:t.fallbackMobileBackground||null,linkAttribute:t.linkAttribute||null,fixedBackground:void 0!==t.fixedBackground&&t.fixedBackground};i.scrollTriggerClass&&i.zielKlasse?this.configurations[s]=i:console.error(`Configuration ${s+1}: 'scrollTriggerClass' and 'zielKlasse' are required.`)}),this.handleScroll=this.handleScroll.bind(this),this.handleResize=this.handleResize.bind(this),this.domContentLoadedHandler=this.domContentLoadedHandler.bind(this),"complete"===document.readyState||"interactive"===document.readyState?this.domContentLoadedHandler():document.addEventListener("DOMContentLoaded",this.domContentLoadedHandler)}domContentLoadedHandler(){this.isDOMContentLoaded||(this.isDOMContentLoaded=!0,this.initElements(),window.addEventListener("scroll",this.onScroll.bind(this),{passive:!0}),window.addEventListener("resize",this.onResize.bind(this)),document.removeEventListener("DOMContentLoaded",this.domContentLoadedHandler))}onScroll(){this.isScrollTicking||(requestAnimationFrame(()=>{this.handleScroll(),this.isScrollTicking=!1}),this.isScrollTicking=!0)}onResize(){this.isResizeTicking||requestAnimationFrame(()=>{this.handleResize(),this.isResizeTicking=!1})}initElements(){this.configurations.forEach((t,e)=>{const s=document.querySelectorAll(t.scrollTriggerClass);if(0===s.length)return void console.warn(`Configuration ${e+1}: No elements found with class '${t.scrollTriggerClass}'.`);const i=document.querySelectorAll(t.parentClass||t.zielKlasse);if(0===i.length)return void console.warn(`Configuration ${e+1}: No elements found with class '${t.parentClass||t.zielKlasse}'.`);s.forEach((s,n)=>{let r=null;if(t.linkAttribute){const a=s.getAttribute(t.linkAttribute);if(!a)return void console.warn(`Configuration ${e+1}, Trigger ${n+1}: Attribute '${t.linkAttribute}' not defined.`);if(r=Array.from(i).find(e=>e.getAttribute(t.linkAttribute)===a),!r)return void console.warn(`Configuration ${e+1}, Trigger ${n+1}: No parent element with '${t.linkAttribute}="${a}"' found.`)}else if(r=i[n],!r)return void console.warn(`Configuration ${e+1}, Trigger ${n+1}: No corresponding parent element found.`);const a=r.querySelectorAll(t.zielKlasse);if(0===a.length)return void console.warn(`Configuration ${e+1}, Parent ${n+1}: No target elements with class '${t.zielKlasse}' found.`);const l={trigger:s,parent:r,config:t,totalWordsInGroup:0,targets:[],lastClampedProgress:-1};a.forEach(e=>{this.prepareTarget(e,t);const s=t.backgroundClass?e.classList.contains(t.backgroundClass):!1,i=s?this.isMobile&&t.fallbackMobileBackground?t.fallbackMobileBackground:t.background:null,n=this.wrapWords(e,t,s,i);l.totalWordsInGroup+=n.length,l.targets.push({element:e,words:n,hasBackgroundClass:s,backgroundValue:i,wordStartIndex:l.totalWordsInGroup-n.length,lastWordsToLight:-1})}),this.groups.set(s,l)})}),this.handleScroll()}prepareTarget(t,e){t.style.transition=`opacity ${e.transitionTime} ${e.easing}`,t.style.opacity="1"}wrapWords(t,e,s,i){const n=t.textContent;t.textContent="";const r=[],a=n.split(" ");return a.forEach((n,l)=>{const o=document.createElement("span");o.textContent=n,o.style.display="inline-block",o.style.opacity=e.initialBrightness,o.style.transition=`opacity ${e.transitionTime} ${e.easing}`,s&&i&&(o.style.backgroundImage=i,o.style.webkitBackgroundClip="text",o.style.backgroundClip="text",o.style.color="transparent",e.fixedBackground&&(o.style.backgroundPosition="center center",o.style.backgroundAttachment="fixed",o.style.backgroundSize="cover")),t.appendChild(o),r.push(o),l<a.length-1&&t.appendChild(document.createTextNode(" "))}),r}handleScroll(){const t=window.innerHeight||document.documentElement.clientHeight;this.groups.forEach(e=>{const{trigger:s,config:i,totalWordsInGroup:n}=e,r=s.getBoundingClientRect(),a=r.height,l=i.offset/100*a,o=((t-r.top-l)/a)*100,d=Math.max(0,Math.min(100,o));if(d===e.lastClampedProgress)return;e.lastClampedProgress=d;const c=Math.floor(d/100*n);e.targets.forEach(t=>{const{words:e,wordStartIndex:s}=t,n=e.length,r=Math.max(0,Math.min(n,c-s));r!==t.lastWordsToLight&&(t.lastWordsToLight=r,e.forEach((e,s)=>{e.style.opacity=s<r?i.targetBrightness:i.initialBrightness}))})})}handleResize(){this.groups.forEach(t=>{t.lastClampedProgress=-1}),this.handleScroll()}}window.ScrollBrightness=ScrollBrightness;
