class CustomCursor{constructor({cursorClass:t="custom-cursor",hoverArray:s=[],downArray:e=[],dragTimer:i=50,downTime:o=300}={}){this.config={cursorClass:t,hoverArray:s,downArray:e,dragTimer:i,downTime:o},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.init()):this.init()}init(){this.cursor=document.createElement("div"),this.cursor.classList.add(this.config.cursorClass),document.body.appendChild(this.cursor),document.body.style.cursor="none",Object.assign(this,{hoverArray:this.config.hoverArray,downArray:this.config.downArray,dragTimer:this.config.dragTimer,downTime:this.config.downTime,mouseX:0,mouseY:0,cursorX:0,cursorY:0,isHover:!1,isDown:!1,downTimeouts:new Map}),this.mouseMoveHandler=this.onMouseMove.bind(this),this.mouseOutHandler=this.onMouseOut.bind(this),this.mouseOverHandler=this.onMouseOver.bind(this),document.addEventListener("mousemove",this.mouseMoveHandler),document.addEventListener("mouseout",this.mouseOutHandler),document.addEventListener("mouseover",this.mouseOverHandler),this.animate(),this.setupEvents(),this.setupMobileHandling()}onMouseMove(t){[this.mouseX,this.mouseY]=[t.clientX,t.clientY]}onMouseOut(t){this.cursor.style.opacity=t.relatedTarget?"1":"0"}onMouseOver(t){this.cursor.style.opacity=t.relatedTarget?"1":"0"}animate(){const t=this.mouseX-this.cursorX,s=this.mouseY-this.cursorY;this.cursorX+=t*(this.dragTimer/100),this.cursorY+=s*(this.dragTimer/100),this.cursor.style.transform=`translate(${this.cursorX}px, ${this.cursorY}px) translate(-50%, -50%)`,requestAnimationFrame(this.animate.bind(this))}setupEvents(){const t=(t,s,e)=>{t.forEach(({trigger:t,hoverstyle:i})=>{document.querySelectorAll(`.${t}`).forEach(t=>{t.addEventListener(s,()=>e(t,i))})})};t(this.hoverArray,"mouseenter",(t,s)=>{this.isHover=!0,this.cursor.classList.add(s)}),t(this.hoverArray,"mouseleave",(t,s)=>{this.isHover=!1,this.cursor.classList.remove(s)}),this.downArray.forEach(({trigger:t,hoverstyle:s})=>{document.querySelectorAll(`.${t}`).forEach(t=>{t.addEventListener("mousedown",()=>this.handleMouseDown(t,s))})})}handleMouseDown(t,s){this.isDown=!0,this.cursor.classList.add(s);const e=Date.now(),i=()=>{this.isDown=!1;const o=Date.now()-e,n=o>=this.downTime?0:this.downTime-o;setTimeout(()=>{this.isDown||this.cursor.classList.remove(s)},n),t.removeEventListener("mouseup",i),t.removeEventListener("mouseleave",i)};t.addEventListener("mouseup",i),t.addEventListener("mouseleave",i)}setupMobileHandling(){if(!this.isTouchDevice())return;const t=10,s=500;let e={};const i=`.${this.config.cursorClass}`,o=t=>{t.dataset.initialized||(t.style.opacity="0",t.dataset.initialized="true")};document.querySelectorAll(i).forEach(o),new MutationObserver(t=>{t.forEach(({addedNodes:t})=>{t.forEach(t=>{1===t.nodeType&&[t,...t.querySelectorAll(i)].forEach(t=>{o(t)})})})}).observe(document.body,{childList:!0,subtree:!0});const n=({touches:t})=>{if(!(t.length>1)){const i=t[0];e={x:i.clientX,y:i.clientY,time:Date.now()}}},r=({changedTouches:i})=>{if(!(i.length>1)){const{clientX:o,clientY:n,time:r}={x:i[0].clientX,y:i[0].clientY,time:Date.now()},{x:h,y:a,time:d}=e,c=Math.abs(o-h),l=Math.abs(n-a);r-d<=s&&c<=t&&l<=t&&this.triggerCursorEffect()}};document.addEventListener("touchstart",n,{passive:!0}),document.addEventListener("touchend",r,{passive:!0})}isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}triggerCursorEffect(){const t=document.querySelectorAll(`.${this.config.cursorClass}`);t.forEach(t=>t.style.opacity="1"),setTimeout(()=>t.forEach(t=>t.style.opacity="0"),500)}destroy(){this.cursor.remove(),document.body.style.cursor="",document.removeEventListener("mousemove",this.mouseMoveHandler),document.removeEventListener("mouseout",this.mouseOutHandler),document.removeEventListener("mouseover",this.mouseOverHandler)}}window.CustomCursor=CustomCursor;
