class Slider{constructor(t){if(!Array.isArray(t))throw Error("Invalid sliderConfigs parameter. Expected an array.");this.sliders=t.map(t=>({sliderDotId:"",sliderDotParentId:"",slideElementId:"",initialPositionPercentage:0,frameRateSliderElement:60,...t,dot:null,parent:null,slide:null})),this.init=this.init.bind(this),this._ready(this.init),this.debouncedResize=this.debounce(()=>{this.sliders.forEach(t=>{t.dot&&t.parent&&t.slide&&(this.updateDimensions(t),this.setInitialPosition(t,t.dot,t.parent,t.slide))})},100),window.addEventListener("resize",this.debouncedResize)}init(){this.sliders.forEach(t=>{const{sliderDotId:e,sliderDotParentId:i,slideElementId:s,initialPositionPercentage:n,frameRateSliderElement:l}=t,r=document.getElementById(e),o=document.getElementById(i),d=document.getElementById(s);if(r&&o&&d)if(void 0===n||void 0===l)console.error("Missing numerical values for initialPositionPercentage or frameRateSliderElement");else{t.dot=r,t.parent=o,t.slide=d,Object.assign(t,{isDragging:!1,startX:0,startY:0,initialX:0,initialY:0,cursorType:["grab","grabbing"],moveListeners:[],endListeners:[],throttleTimeout:null}),this.setCursor(r,t.cursorType[0]),["mousedown","touchstart"].forEach(e=>{r.addEventListener(e,e=>this.handleStart(e,t))}),this.updateDimensions(t),this.setInitialPosition(t,r,o,d)}else console.error(`Missing or invalid IDs: ${e}, ${i}, ${s}`)})}setInitialPosition(t,e,i,s){const n=i.offsetWidth-e.offsetWidth,l=n*t.initialPositionPercentage/100;this.updateSliderPosition(t,l,e,s,i)}setCursor(t,e){t.style.cursor=e,t.style.cursor=`-webkit-${e}`}handleStart(t,e){t.preventDefault(),e.isDragging=!0;const{clientX:i,clientY:s}="mousedown"===t.type?t:t.touches[0];Object.assign(e,{startX:i,startY:s,initialX:e.dot.offsetLeft,initialY:e.dot.offsetTop}),this.setCursor(e.dot,e.cursorType[1]),["mousemove","touchmove"].forEach(t=>{const i=t=>this.throttledHandleMove(t,e);document.addEventListener(t,i),e.moveListeners.push({evt:t,listener:i})}),["mouseup","touchend","touchcancel"].forEach(t=>{const i=()=>this.handleEnd(e);document.addEventListener(t,i),e.endListeners.push({evt:t,listener:i})})}throttledHandleMove(t,e){e.throttleTimeout||(e.throttleTimeout=setTimeout(()=>{if(e.throttleTimeout=null,e.isDragging){const i="mousemove"===t.type?t.clientX:t.touches&&t.touches[0]?t.touches[0].clientX:null;if(null===i)return;const s=i-e.startX,n=e.initialX+s;this.updateSliderPosition(e,n,e.dot,e.slide,e.parent),(n<=0||n+e.dot.offsetWidth>=e.parent.offsetWidth)&&t.preventDefault()}},1e3/e.frameRateSliderElement))}handleEnd(t){t.isDragging=!1,this.removeEventListeners(t),this.setCursor(t.dot,t.cursorType[0])}removeEventListeners(t){t.moveListeners.forEach(({evt:t,listener:e})=>{document.removeEventListener(t,e)}),t.endListeners.forEach(({evt:t,listener:e})=>{document.removeEventListener(t,e)}),t.moveListeners=[],t.endListeners=[],t.throttleTimeout&&(clearTimeout(t.throttleTimeout),t.throttleTimeout=null)}updateDimensions(t){t.parent&&t.dot&&t.slide?(t.parentWidth=t.parent.offsetWidth,t.dotWidth=t.dot.offsetWidth,t.slideWidth=t.slide.offsetWidth,t.cardParentWidth=t.slide.parentElement?t.slide.parentElement.offsetWidth:0):console.warn("One or more elements are missing during updateDimensions.")}updateSliderPosition(t,e,i,s){const n=t.parentWidth-t.dotWidth,l=Math.min(Math.max(e,0),n),r=-(l/n)*(t.slideWidth-t.cardParentWidth);i.style.left=`${l}px`,s.style.left=`${r}px`}_ready(t){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()}debounce(t,e){let i;return function(...s){const n=()=>{clearTimeout(i),t.apply(this,s)};clearTimeout(i),i=setTimeout(n,e)}}}window.Slider=Slider;
