class SpanFadeInStagger{constructor(a){this.textIDs=a.textIDs||[],this.easing=a.easing||"ease",this.transition=a.transition||"200ms",this.threshold=a.threshold||.5,this.staggerDelay=a.staggerDelay||100,this.repeat=a.repeat||!1,this.responsive=a.responsive||!1,this.observers=new Map,document.addEventListener("DOMContentLoaded",()=>{this.init(),this.responsive&&window.addEventListener("resize",this.debounce(()=>this.init(),300))})}debounce(a,b){let c;return()=>{clearTimeout(c),c=setTimeout(()=>a.apply(this),b)}}init(){this.textIDs.forEach(a=>{const b=document.getElementById(a);if(!b)return;this.unwrapSpans(b),this.wrapLinesInSpans(b);const c={threshold:this.threshold},d=Array.from(b.querySelectorAll(".word-span, .line-span")),e=new IntersectionObserver((a,c)=>{a.forEach(a=>{a.isIntersecting?(this.animateSpans(d),!this.repeat&&(b.setAttribute("data-animated","true"),c.unobserve(a.target))):this.repeat&&this.resetSpans(d)})},c);e.observe(b),this.observers.set(a,e)})}animateSpans(a){a.forEach((a,b)=>{a.style.transition=`opacity ${this.transition} ${this.easing}, transform ${this.transition} ${this.easing}`,setTimeout(()=>{a.style.opacity="1",a.style.transform="translateY(0)"},b*this.staggerDelay)})}resetSpans(a){a.forEach(a=>{a.style.opacity="0",a.style.transform="translateY(10px)"})}wrapLinesInSpans(a){const b=document.createRange(),c=this.getTextNodes(a),d=[];c.forEach(b=>{const c=b.textContent.split(/(\s+)/);for(let e=0;e<c.length;e++){const f=c[e];if(""!==f.trim()){const g=e+1<c.length&&""===c[e+1].trim()?c[e+1]:"",h=document.createElement("span");h.textContent=f+g,h.classList.add("word-span"),a.insertBefore(h,b),d.push(h)}}a.removeChild(b)});const e=[];d.forEach(a=>{b.selectNode(a);const c=b.getBoundingClientRect(),d=c.top;0===e.length||5<Math.abs(d-e[e.length-1].top)?e.push({top:d,spans:[a]}):e[e.length-1].spans.push(a)}),e.forEach(()=>{})}unwrapSpans(a){const b=Array.from(a.querySelectorAll("span.line-span"));b.forEach(a=>{for(;a.firstChild;)a.parentNode.insertBefore(a.firstChild,a);a.parentNode.removeChild(a)});const c=Array.from(a.querySelectorAll("span.word-span"));c.forEach(a=>{const b=a.parentNode;for(;a.firstChild;)b.insertBefore(a.firstChild,a);b.removeChild(a)})}getTextNodes(a){const b=[],c=document.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1);for(let d;d=c.nextNode();)""!==d.textContent.trim()&&b.push(d);return b}}window.SpanFadeInStagger=SpanFadeInStagger;