class SpanFadeInStagger{constructor(a){this.textIDs=a.textIDs||[],this.easing=a.easing||"ease",this.transition=a.transition||"200ms",this.threshold=a.threshold||.5,this.staggerDelay=a.staggerDelay||100,this.responsive=a.responsive||!1,this.observers=new Map,document.addEventListener("DOMContentLoaded",()=>{this.init(),this.responsive&&window.addEventListener("resize",this.debounce(()=>this.init(),300))})}debounce(a,b){let c;return()=>{clearTimeout(c),c=setTimeout(()=>a.apply(this),b)}}init(){this.textIDs.forEach(a=>{const b=document.getElementById(a);if(!b)return void console.error(`Element with ID "${a}" not found.`);if("true"===b.getAttribute("data-animated"))return;if(this.observers.has(a)){const b=this.observers.get(a);b.disconnect(),this.observers.delete(a)}this.unwrapSpans(b),this.wrapLinesInSpans(b),b.style.overflow="hidden";const c=Array.from(b.querySelectorAll("span.line-span"));if(0===c.length)return void console.warn(`No line spans found within the element with ID "${a}".`);c.forEach(a=>{a.style.display="block",a.style.opacity="0",a.style.transform="translateY(20px)",a.style.transition=`opacity ${this.transition} ${this.easing}, transform ${this.transition} ${this.easing}`,a.style.willChange="opacity, transform"});const d={threshold:this.threshold},e=new IntersectionObserver((a,d)=>{a.forEach(a=>{a.isIntersecting&&(this.animateSpans(c),b.setAttribute("data-animated","true"),d.unobserve(a.target))})},d);e.observe(b),this.observers.set(a,e)})}animateSpans(a){a.forEach((a,b)=>{setTimeout(()=>{a.style.opacity="1",a.style.transform="translateY(0)"},b*this.staggerDelay)})}wrapLinesInSpans(a){const b=document.createRange(),c=this.getTextNodes(a),d=[];c.forEach(b=>{const c=b.textContent.split(/(\s+)/);for(let e=0;e<c.length;e++){const f=c[e];if(""!==f.trim()){const g=e+1<c.length&&""===c[e+1].trim()?c[e+1]:"",h=document.createElement("span");h.textContent=f+g,h.classList.add("word-span"),a.insertBefore(h,b),d.push(h)}}a.removeChild(b)});const e=[];d.forEach(a=>{b.selectNode(a);const c=b.getBoundingClientRect(),d=c.top;0===e.length||5<Math.abs(d-e[e.length-1].top)?e.push({top:d,spans:[a]}):e[e.length-1].spans.push(a)}),e.forEach(a=>{const b=document.createElement("span");b.classList.add("line-span"),a.spans[0].parentNode.insertBefore(b,a.spans[0]),a.spans.forEach(a=>{b.appendChild(a)})})}unwrapSpans(a){const b=Array.from(a.querySelectorAll("span.line-span"));b.forEach(a=>{const b=a.parentNode;for(;a.firstChild;)b.insertBefore(a.firstChild,a);b.removeChild(a)});const c=Array.from(a.querySelectorAll("span.word-span"));c.forEach(a=>{const b=a.parentNode,c=document.createTextNode(a.textContent);b.insertBefore(c,a),b.removeChild(a)})}getTextNodes(a){let b=[];const c=document.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1);for(let d;d=c.nextNode();)""!==d.textContent.trim()&&b.push(d);return b}}window.SpanFadeInStagger=SpanFadeInStagger;