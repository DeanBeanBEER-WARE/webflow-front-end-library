!function(t){class e{constructor(t){this.options=t,this.handleWheel=this.handleWheel.bind(this),this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),this.handleEvent=this.handleEvent.bind(this),this.animateScroll=this.animateScroll.bind(this),this.debounceTimeout=null,this.debounceDelay=50,this.scrollSpeed=t.scrollSpeed||100,this.smoothScrollFactor=t.smoothScrollFactor||50,this.pageWrapperId=t.pageWrapper||"pagewrapper",this.easingMode=t.easingMode||"ease",this.checkEvent=t.checkEvent||"scroll",this.hoverTriggers=t.hoverTriggers||[],this.triggerElements=t.triggerElements||[],this.conditionElementsIDs=t.conditionElements||[],this.conditionArray=t.conditionArray||[],this.maxCheckDuration=t.maxCheckDuration||1e3,this.numChecks=5,this.targetScroll=0,this.currentScroll=0,this.isAnimating=!1,this.startScroll=0,this.startTime=null,this.isTouching=!1,this.touchStartY=0,this.touchDeltaY=0,this.isScrollingEnabled=!0,this.easingFunctions={ease:this.ease,"ease-in":this.easeIn,"ease-out":this.easeOut,"ease-in-out":this.easeInOut},this.easingFunctions[this.easingMode]||(console.warn(`ScrollManager: Invalid easingMode "${this.easingMode}". Using "ease" as default.`),this.easingMode="ease"),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{this.init(),this.observeMutations()}):(this.init(),this.observeMutations())}ease(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}easeIn(t){return t*t*t}easeOut(t){return 1-Math.pow(1-t,3)}easeInOut(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}init(){if(this.pageWrapper=document.getElementById(this.pageWrapperId),!this.pageWrapper)return void console.error(`ScrollManager: Element with ID "${this.pageWrapperId}" not found.`);document.body.style.overflow="hidden",this.pageWrapper.style.position="fixed",this.pageWrapper.style.top="0",this.pageWrapper.style.left="0",this.pageWrapper.style.width="100%",this.pageWrapper.style.height="100%",this.pageWrapper.style.overflow="hidden",this.currentScroll=this.pageWrapper.scrollTop,this.targetScroll=this.currentScroll,window.addEventListener("wheel",this.handleWheel,{passive:!1}),this.pageWrapper.addEventListener("touchstart",this.handleTouchStart,{passive:!1}),this.pageWrapper.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),this.pageWrapper.addEventListener("touchend",this.handleTouchEnd,{passive:!1}),this.conditionElements=this.conditionElementsIDs.map((t,e)=>{const i=document.getElementById(t);return i||console.warn(`ScrollManager: Condition element at index ${e} (ID: '${t}') is not defined.`),i}),this.setupToggleEventListeners(),this.checkConditions()}setupToggleEventListeners(){switch(this.checkEvent){case"scroll":window.addEventListener("scroll",this.handleEvent);break;case"click":document.addEventListener("click",this.handleEvent);break;case"hover":this.hoverTriggers.forEach(t=>{const e=document.getElementsByClassName(t);Array.from(e).forEach(t=>{t.addEventListener("mouseenter",this.handleEvent),t.addEventListener("mouseleave",this.handleEvent)})});break;default:console.warn(`ScrollManager: Unknown checkEvent '${this.checkEvent}'`)}}enableScroll(){this.isScrollingEnabled||(this.isScrollingEnabled=!0,document.body.style.overflow="hidden",this.pageWrapper.style.overflow="hidden")}disableScroll(){this.isScrollingEnabled&&(this.isScrollingEnabled=!1,document.body.style.overflow="",this.pageWrapper.style.overflow="")}handleWheel(t){if(this.isScrollingEnabled){t.preventDefault(),this.targetScroll+=t.deltaY>0?this.scrollSpeed:-this.scrollSpeed;const e=this.pageWrapper.scrollHeight-window.innerHeight;this.targetScroll=Math.max(0,Math.min(this.targetScroll,e)),this.isAnimating||(this.isAnimating=!0,this.startTime=null,this.startScroll=this.pageWrapper.scrollTop,requestAnimationFrame(this.animateScroll))}}handleTouchStart(t){1===t.touches.length&&(this.isTouching=!0,this.touchStartY=t.touches[0].clientY,this.touchDeltaY=0)}handleTouchMove(t){if(this.isTouching&&1===t.touches.length){const e=t.touches[0].clientY;this.touchDeltaY=this.touchStartY-e,this.targetScroll+=this.touchDeltaY;const i=this.pageWrapper.scrollHeight-window.innerHeight;this.targetScroll=Math.max(0,Math.min(this.targetScroll,i)),this.touchStartY=e,this.isAnimating||(this.isAnimating=!0,this.startTime=null,this.startScroll=this.pageWrapper.scrollTop,requestAnimationFrame(this.animateScroll))}}handleTouchEnd(t){this.isTouching&&(this.isTouching=!1)}animateScroll(t){this.startTime||(this.startTime=t);const e=t-this.startTime,i=1e3*(this.smoothScrollFactor/100),s=Math.min(e/i,1),n=this.easingFunctions[this.easingMode](s);this.currentScroll=this.startScroll+(this.targetScroll-this.startScroll)*n,this.pageWrapper.scrollTop=this.currentScroll,s<1?requestAnimationFrame(this.animateScroll):(this.currentScroll=this.targetScroll,this.pageWrapper.scrollTop=this.currentScroll,this.isAnimating=!1)}handleEvent(t){this.checkConditions(),clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(()=>{this.checkConditions()},this.debounceDelay);const e=Math.round(this.maxCheckDuration/this.numChecks);for(let t=1;t<=this.numChecks;t++){const i=e*t;setTimeout(()=>{this.checkConditions()},i)}}checkConditions(){let t=!1,e=!1;this.conditionArray.forEach(i=>{const{conditionAttribute:s,conditionActive:n,conditionDisable:o}=i;this.conditionElements.forEach(i=>{if(!(i instanceof Element))return void console.warn("ScrollManager: Condition element is not defined or not an Element.");const r=window.getComputedStyle(i).getPropertyValue(s).trim();this.compareValues(r,o)?e=!0:this.compareValues(r,n)&&(t=!0)})}),e?this.disableScroll():t&&this.enableScroll()}compareValues(t,e){return parseFloat(t)===parseFloat(e)}observeMutations(){const t=this.conditionArray.map(t=>t.conditionAttribute),e={attributes:!0,attributeFilter:t};this.conditionElements.forEach(t=>{if(t instanceof Element){const i=new MutationObserver(t=>{for(let e of t)"attributes"===e.type&&this.checkConditions()});i.observe(t,e)}else console.warn("ScrollManager: Condition element is not defined or not an Element. MutationObserver not set up.")})}}t.ScrollManager=e}(window);
